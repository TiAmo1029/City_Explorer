/**
 * @license
 * Cesium - https://github.com/CesiumGS/cesium
 * Version 1.132
 *
 * Copyright 2011-2022 Cesium Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Columbus View (Pat. Pend.)
 *
 * Portions licensed separately.
 * See https://github.com/CesiumGS/cesium/blob/main/LICENSE.md for full licensing details.
 */
import{a as on}from"./chunk-WZDE3RYP.js";import{a as f}from"./chunk-OSW76XDF.js";import{a as re}from"./chunk-ED5JPB3S.js";import{b as sn}from"./chunk-LEYMRMBK.js";import{a as Vt,c as rr,d as sr,e as Le}from"./chunk-VTAIKJXX.js";var cn=rr((e,t)=>{var r=function(){var e=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(e=e||__filename),function(t){t=t||{};var r,n,_=typeof t<"u"?t:{};_.ready=new Promise(function(e,t){r=e,n=t});var i,o={};for(i in _)_.hasOwnProperty(i)&&(o[i]=_[i]);var a=[],s=!1,u=!1,R=!1,c=!1;s="object"==typeof window,u="function"==typeof importScripts,R="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,c=!s&&!R&&!u;var f,T,A,l,O,p="";function C(e){return _.locateFile?_.locateFile(e,p):p+e}R?(p=u?Vt("path").dirname(p)+"/":__dirname+"/",f=function(e,t){return l||(l=Vt("fs")),O||(O=Vt("path")),e=O.normalize(e),l.readFileSync(e,t?null:"utf8")},A=function(e){var t=f(e,!0);return t.buffer||(t=new Uint8Array(t)),F(t.buffer),t},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),a=process.argv.slice(2),process.on("uncaughtException",function(e){if(!(e instanceof Zr))throw e}),process.on("unhandledRejection",Te),_.inspect=function(){return"[Emscripten Module object]"}):c?(typeof read<"u"&&(f=function(e){return read(e)}),A=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(t=read(e,"binary"),F("object"==typeof t),t)},typeof scriptArgs<"u"?a=scriptArgs:typeof arguments<"u"&&(a=arguments),"function"==typeof quit&&function(e){quit(e)},typeof print<"u"&&(typeof console>"u"&&(console={}),console.log=print,console.warn=console.error=typeof printErr<"u"?printErr:print)):(s||u)&&(u?p=self.location.href:typeof document<"u"&&document.currentScript&&(p=document.currentScript.src),e&&(p=e),p=0!==p.indexOf("blob:")?p.substr(0,p.lastIndexOf("/")+1):"",f=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},u&&(A=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),T=function(e,t,r){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)});var B=_.print||console.log.bind(console),G=_.printErr||console.warn.bind(console);for(i in o)o.hasOwnProperty(i)&&(_[i]=o[i]);o=null,_.arguments&&(a=_.arguments),_.thisProgram&&_.thisProgram,_.quit&&_.quit;var M,d=function(e){0};_.wasmBinary&&(M=_.wasmBinary);_.noExitRuntime;"object"!=typeof WebAssembly&&Te("no native wasm support detected");var h,K=!1;function F(e,t){e||Te("Assertion failed: "+t)}var y=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function N(e,t,r){for(var n=t+r,_=t;e[_]&&!(_>=n);)++_;if(_-t>16&&e.subarray&&y)return y.decode(e.subarray(t,_));for(var i="";t<_;){var o=e[t++];if(128&o){var a=63&e[t++];if(192!=(224&o)){var s=63&e[t++];if(o=224==(240&o)?(15&o)<<12|a<<6|s:(7&o)<<18|a<<12|s<<6|63&e[t++],o<65536)i+=String.fromCharCode(o);else{var u=o-65536;i+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else i+=String.fromCharCode((31&o)<<6|a)}else i+=String.fromCharCode(o)}return i}function E(e,t){return e?N(U,e,t):""}function v(e,t,r,n){if(!(n>0))return 0;for(var _=r,i=r+n-1,o=0;o<e.length;++o){var a=e.charCodeAt(o);if(a>=55296&&a<=57343){var s=e.charCodeAt(++o);a=65536+((1023&a)<<10)|1023&s}if(a<=127){if(r>=i)break;t[r++]=a}else if(a<=2047){if(r+1>=i)break;t[r++]=192|a>>6,t[r++]=128|63&a}else if(a<=65535){if(r+2>=i)break;t[r++]=224|a>>12,t[r++]=128|a>>6&63,t[r++]=128|63&a}else{if(r+3>=i)break;t[r++]=240|a>>18,t[r++]=128|a>>12&63,t[r++]=128|a>>6&63,t[r++]=128|63&a}}return t[r]=0,r-_}function P(e,t,r){return v(e,U,t,r)}function S(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&e.charCodeAt(++r)),n<=127?++t:t+=n<=2047?2:n<=65535?3:4}return t}var V,m,U,g,L,w,I,D,b,X=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function x(e,t){for(var r=e,n=r>>1,_=n+t/2;!(n>=_)&&L[n];)++n;if(r=n<<1,r-e>32&&X)return X.decode(U.subarray(e,r));for(var i="",o=0;!(o>=t/2);++o){var a=g[e+2*o>>1];if(0==a)break;i+=String.fromCharCode(a)}return i}function H(e,t,r){if(void 0===r&&(r=2147483647),r<2)return 0;r-=2;for(var n=t,_=r<2*e.length?r/2:e.length,i=0;i<_;++i){var o=e.charCodeAt(i);g[t>>1]=o,t+=2}return g[t>>1]=0,t-n}function $(e){return 2*e.length}function k(e,t){for(var r=0,n="";!(r>=t/4);){var _=w[e+4*r>>2];if(0==_)break;if(++r,_>=65536){var i=_-65536;n+=String.fromCharCode(55296|i>>10,56320|1023&i)}else n+=String.fromCharCode(_)}return n}function W(e,t,r){if(void 0===r&&(r=2147483647),r<4)return 0;for(var n=t,_=n+r-4,i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o>=55296&&o<=57343){var a=e.charCodeAt(++i);o=65536+((1023&o)<<10)|1023&a}if(w[t>>2]=o,t+=4,t+4>_)break}return w[t>>2]=0,t-n}function j(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&++r,t+=4}return t}function z(e,t){return e%t>0&&(e+=t-e%t),e}function Y(e){V=e,_.HEAP8=m=new Int8Array(e),_.HEAP16=g=new Int16Array(e),_.HEAP32=w=new Int32Array(e),_.HEAPU8=U=new Uint8Array(e),_.HEAPU16=L=new Uint16Array(e),_.HEAPU32=I=new Uint32Array(e),_.HEAPF32=D=new Float32Array(e),_.HEAPF64=b=new Float64Array(e)}_.INITIAL_MEMORY;var q,J=[],Z=[],Q=[],ee=[];function te(){if(_.preRun)for("function"==typeof _.preRun&&(_.preRun=[_.preRun]);_.preRun.length;)ie(_.preRun.shift());he(J)}function re(){he(Z)}function ne(){he(Q)}function _e(){if(_.postRun)for("function"==typeof _.postRun&&(_.postRun=[_.postRun]);_.postRun.length;)ae(_.postRun.shift());he(ee)}function ie(e){J.unshift(e)}function oe(e){Z.unshift(e)}function ae(e){ee.unshift(e)}var se=0,ue=null,Re=null;function ce(e){se++,_.monitorRunDependencies&&_.monitorRunDependencies(se)}function fe(e){if(se--,_.monitorRunDependencies&&_.monitorRunDependencies(se),0==se&&(null!==ue&&(clearInterval(ue),ue=null),Re)){var t=Re;Re=null,t()}}function Te(e){_.onAbort&&_.onAbort(e),e+="",G(e),K=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw n(t),t}function Ae(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}_.preloadedImages={},_.preloadedAudios={};var le="data:application/octet-stream;base64,";function Oe(e){return Ae(e,le)}var pe="file://";function Ce(e){return Ae(e,pe)}var Be="basis_transcoder.wasm";function Ge(e){try{if(e==Be&&M)return new Uint8Array(M);if(A)return A(e);throw"both async and sync fetching of the wasm failed"}catch(t){Te(t)}}function Me(){if(!M&&(s||u)){if("function"==typeof fetch&&!Ce(Be))return fetch(Be,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+Be+"'";return e.arrayBuffer()}).catch(function(){return Ge(Be)});if(T)return new Promise(function(e,t){T(Be,function(t){e(new Uint8Array(t))},t)})}return Promise.resolve().then(function(){return Ge(Be)})}function de(){var e={a:zr};function t(e,t){var r=e.exports;_.asm=r,h=_.asm.K,Y(h.buffer),q=_.asm.O,oe(_.asm.L),fe("wasm-instantiate")}function r(e){t(e.instance)}function i(t){return Me().then(function(t){var r=WebAssembly.instantiate(t,e);return r}).then(t,function(e){G("failed to asynchronously prepare wasm: "+e),Te(e)})}function o(){return M||"function"!=typeof WebAssembly.instantiateStreaming||Oe(Be)||Ce(Be)||"function"!=typeof fetch?i(r):fetch(Be,{credentials:"same-origin"}).then(function(t){var n=WebAssembly.instantiateStreaming(t,e);return n.then(r,function(e){return G("wasm streaming compile failed: "+e),G("falling back to ArrayBuffer instantiation"),i(r)})})}if(ce("wasm-instantiate"),_.instantiateWasm)try{var a=_.instantiateWasm(e,t);return a}catch(s){return G("Module.instantiateWasm callback failed with error: "+s),!1}return o().catch(n),{}}function he(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"==typeof r?void 0===t.arg?q.get(r)():q.get(r)(t.arg):r(void 0===t.arg?null:t.arg)}else t(_)}}Oe(Be)||(Be=C(Be));var Ke={};function Fe(e){for(;e.length;){var t=e.pop(),r=e.pop();r(t)}}function ye(e){return this.fromWireType(I[e>>2])}var Ne={},Ee={},ve={},Pe=48,Se=57;function Ve(e){if(void 0===e)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=Pe&&t<=Se?"_"+e:e}function me(e,t){return e=Ve(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function Ue(e,t){var r=me(t,function(e){this.name=t,this.message=e;var r=new Error(e).stack;void 0!==r&&(this.stack=this.toString()+"\n"+r.replace(/^Error(:[^\n]*)?\n/,""))});return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},r}var ge=void 0;function Le(e){throw new ge(e)}function we(e,t,r){function n(t){var n=r(t);n.length!==e.length&&Le("Mismatched type converter count");for(var _=0;_<e.length;++_)ke(e[_],n[_])}e.forEach(function(e){ve[e]=t});var _=new Array(t.length),i=[],o=0;t.forEach(function(e,t){Ee.hasOwnProperty(e)?_[t]=Ee[e]:(i.push(e),Ne.hasOwnProperty(e)||(Ne[e]=[]),Ne[e].push(function(){_[t]=Ee[e],++o,o===i.length&&n(_)}))}),0===i.length&&n(_)}function Ie(e){var t=Ke[e];delete Ke[e];var r=t.rawConstructor,n=t.rawDestructor,_=t.fields,i=_.map(function(e){return e.getterReturnType}).concat(_.map(function(e){return e.setterArgumentType}));we([e],i,function(e){var i={};return _.forEach(function(t,r){var n=t.fieldName,o=e[r],a=t.getter,s=t.getterContext,u=e[r+_.length],R=t.setter,c=t.setterContext;i[n]={read:function(e){return o.fromWireType(a(s,e))},write:function(e,t){var r=[];R(c,e,u.toWireType(r,t)),Fe(r)}}}),[{name:t.name,fromWireType:function(e){var t={};for(var r in i)t[r]=i[r].read(e);return n(e),t},toWireType:function(e,t){for(var _ in i)if(!(_ in t))throw new TypeError('Missing field:  "'+_+'"');var o=r();for(_ in i)i[_].write(o,t[_]);return null!==e&&e.push(n,o),o},argPackAdvance:8,readValueFromPointer:ye,destructorFunction:n}]})}function De(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function be(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);Xe=e}var Xe=void 0;function xe(e){for(var t="",r=e;U[r];)t+=Xe[U[r++]];return t}var He=void 0;function $e(e){throw new He(e)}function ke(e,t,r){if(r=r||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var n=t.name;if(e||$e('type "'+n+'" must have a positive integer typeid pointer'),Ee.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;$e("Cannot register type '"+n+"' twice")}if(Ee[e]=t,delete ve[e],Ne.hasOwnProperty(e)){var _=Ne[e];delete Ne[e],_.forEach(function(e){e()})}}function We(e,t,r,n,_){var i=De(r);t=xe(t),ke(e,{name:t,fromWireType:function(e){return!!e},toWireType:function(e,t){return t?n:_},argPackAdvance:8,readValueFromPointer:function(e){var n;if(1===r)n=m;else if(2===r)n=g;else{if(4!==r)throw new TypeError("Unknown boolean type size: "+t);n=w}return this.fromWireType(n[e>>i])},destructorFunction:null})}function je(e){if(!(this instanceof ut)||!(e instanceof ut))return!1;for(var t=this.$$.ptrType.registeredClass,r=this.$$.ptr,n=e.$$.ptrType.registeredClass,_=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;n.baseClass;)_=n.upcast(_),n=n.baseClass;return t===n&&r===_}function ze(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function Ye(e){function t(e){return e.$$.ptrType.registeredClass.name}$e(t(e)+" instance already deleted")}var qe=!1;function Je(e){}function Ze(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}function Qe(e){e.count.value-=1;var t=0===e.count.value;t&&Ze(e)}function et(e){return typeof FinalizationGroup>"u"?(et=function(e){return e},e):(qe=new FinalizationGroup(function(e){for(var t=e.next();!t.done;t=e.next()){var r=t.value;r.ptr?Qe(r):console.warn("object already deleted: "+r.ptr)}}),et=function(e){return qe.register(e,e.$$,e.$$),e},Je=function(e){qe.unregister(e.$$)},et(e))}function tt(){if(this.$$.ptr||Ye(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=et(Object.create(Object.getPrototypeOf(this),{$$:{value:ze(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function rt(){this.$$.ptr||Ye(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&$e("Object already scheduled for deletion"),Je(this),Qe(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function nt(){return!this.$$.ptr}var _t=void 0,it=[];function ot(){for(;it.length;){var e=it.pop();e.$$.deleteScheduled=!1,e.delete()}}function at(){return this.$$.ptr||Ye(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&$e("Object already scheduled for deletion"),it.push(this),1===it.length&&_t&&_t(ot),this.$$.deleteScheduled=!0,this}function st(){ut.prototype.isAliasOf=je,ut.prototype.clone=tt,ut.prototype.delete=rt,ut.prototype.isDeleted=nt,ut.prototype.deleteLater=at}function ut(){}var Rt={};function ct(e,t,r){if(void 0===e[t].overloadTable){var n=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||$e("Function '"+r+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[n.argCount]=n}}function ft(e,t,r){_.hasOwnProperty(e)?((void 0===r||void 0!==_[e].overloadTable&&void 0!==_[e].overloadTable[r])&&$e("Cannot register public name '"+e+"' twice"),ct(_,e,e),_.hasOwnProperty(r)&&$e("Cannot register multiple overloads of a function with the same number of arguments ("+r+")!"),_[e].overloadTable[r]=t):(_[e]=t,void 0!==r&&(_[e].numArguments=r))}function Tt(e,t,r,n,_,i,o,a){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=_,this.getActualType=i,this.upcast=o,this.downcast=a,this.pureVirtualFunctions=[]}function At(e,t,r){for(;t!==r;)t.upcast||$e("Expected null or instance of "+r.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function lt(e,t){if(null===t)return this.isReference&&$e("null is not a valid "+this.name),0;t.$$||$e('Cannot pass "'+ar(t)+'" as a '+this.name),t.$$.ptr||$e("Cannot pass deleted object as a pointer of type "+this.name);var r=t.$$.ptrType.registeredClass,n=At(t.$$.ptr,r,this.registeredClass);return n}function Ot(e,t){var r;if(null===t)return this.isReference&&$e("null is not a valid "+this.name),this.isSmartPointer?(r=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,r),r):0;t.$$||$e('Cannot pass "'+ar(t)+'" as a '+this.name),t.$$.ptr||$e("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&$e("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var n=t.$$.ptrType.registeredClass;if(r=At(t.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&$e("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:$e("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var _=t.clone();r=this.rawShare(r,tr(function(){_.delete()})),null!==e&&e.push(this.rawDestructor,r)}break;default:$e("Unsupporting sharing policy")}return r}function pt(e,t){if(null===t)return this.isReference&&$e("null is not a valid "+this.name),0;t.$$||$e('Cannot pass "'+ar(t)+'" as a '+this.name),t.$$.ptr||$e("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&$e("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var r=t.$$.ptrType.registeredClass,n=At(t.$$.ptr,r,this.registeredClass);return n}function Ct(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function Bt(e){this.rawDestructor&&this.rawDestructor(e)}function Gt(e){null!==e&&e.delete()}function Mt(e,t,r){if(t===r)return e;if(void 0===r.baseClass)return null;var n=Mt(e,t,r.baseClass);return null===n?null:r.downcast(n)}function dt(){return Object.keys(yt).length}function ht(){var e=[];for(var t in yt)yt.hasOwnProperty(t)&&e.push(yt[t]);return e}function Kt(e){_t=e,it.length&&_t&&_t(ot)}function Ft(){_.getInheritedInstanceCount=dt,_.getLiveInheritedInstances=ht,_.flushPendingDeletes=ot,_.setDelayFunction=Kt}var yt={};function Nt(e,t){for(void 0===t&&$e("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}function Et(e,t){return t=Nt(e,t),yt[t]}function vt(e,t){(!t.ptrType||!t.ptr)&&Le("makeClassHandle requires ptr and ptrType");var r=!!t.smartPtrType,n=!!t.smartPtr;return r!==n&&Le("Both smartPtrType and smartPtr must be specified"),t.count={value:1},et(Object.create(e,{$$:{value:t}}))}function Pt(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=Et(this.registeredClass,t);if(void 0!==r){if(0===r.$$.count.value)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var n=r.clone();return this.destructor(e),n}function _(){return this.isSmartPointer?vt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):vt(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var i,o=this.registeredClass.getActualType(t),a=Rt[o];if(!a)return _.call(this);i=this.isConst?a.constPointerType:a.pointerType;var s=Mt(t,this.registeredClass,i.registeredClass);return null===s?_.call(this):this.isSmartPointer?vt(i.registeredClass.instancePrototype,{ptrType:i,ptr:s,smartPtrType:this,smartPtr:e}):vt(i.registeredClass.instancePrototype,{ptrType:i,ptr:s})}function St(){mt.prototype.getPointee=Ct,mt.prototype.destructor=Bt,mt.prototype.argPackAdvance=8,mt.prototype.readValueFromPointer=ye,mt.prototype.deleteObject=Gt,mt.prototype.fromWireType=Pt}function mt(e,t,r,n,_,i,o,a,s,u,R){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=n,this.isSmartPointer=_,this.pointeeType=i,this.sharingPolicy=o,this.rawGetPointee=a,this.rawConstructor=s,this.rawShare=u,this.rawDestructor=R,_||void 0!==t.baseClass?this.toWireType=Ot:n?(this.toWireType=lt,this.destructorFunction=null):(this.toWireType=pt,this.destructorFunction=null)}function Ut(e,t,r){_.hasOwnProperty(e)||Le("Replacing nonexistant public symbol"),void 0!==_[e].overloadTable&&void 0!==r?_[e].overloadTable[r]=t:(_[e]=t,_[e].argCount=r)}function gt(e,t,r){var n=_["dynCall_"+e];return r&&r.length?n.apply(null,[t].concat(r)):n.call(null,t)}function Lt(e,t,r){return-1!=e.indexOf("j")?gt(e,t,r):q.get(t).apply(null,r)}function wt(e,t){var r=[];return function(){r.length=arguments.length;for(var n=0;n<arguments.length;n++)r[n]=arguments[n];return Lt(e,t,r)}}function It(e,t){function r(){return-1!=e.indexOf("j")?wt(e,t):q.get(t)}e=xe(e);var n=r();return"function"!=typeof n&&$e("unknown function pointer with signature "+e+": "+t),n}var Dt=void 0;function bt(e){var t=Jr(e),r=xe(t);return qr(t),r}function Xt(e,t){var r=[],n={};function _(e){if(!n[e]&&!Ee[e]){if(ve[e])return void ve[e].forEach(_);r.push(e),n[e]=!0}}throw t.forEach(_),new Dt(e+": "+r.map(bt).join([", "]))}function xt(e,t,r,n,_,i,o,a,s,u,R,c,f){R=xe(R),i=It(_,i),a&&(a=It(o,a)),u&&(u=It(s,u)),f=It(c,f);var T=Ve(R);ft(T,function(){Xt("Cannot construct "+R+" due to unbound types",[n])}),we([e,t,r],n?[n]:[],function(t){var r,_;t=t[0],n?(r=t.registeredClass,_=r.instancePrototype):_=ut.prototype;var o=me(T,function(){if(Object.getPrototypeOf(this)!==s)throw new He("Use 'new' to construct "+R);if(void 0===c.constructor_body)throw new He(R+" has no accessible constructor");var e=c.constructor_body[arguments.length];if(void 0===e)throw new He("Tried to invoke ctor of "+R+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(c.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)}),s=Object.create(_,{constructor:{value:o}});o.prototype=s;var c=new Tt(R,o,s,f,r,i,a,u),A=new mt(R,c,!0,!1,!1),l=new mt(R+"*",c,!1,!1,!1),O=new mt(R+" const*",c,!1,!0,!1);return Rt[e]={pointerType:l,constPointerType:O},Ut(T,o),[A,l,O]})}function Ht(e,t){for(var r=[],n=0;n<e;n++)r.push(w[(t>>2)+n]);return r}function $t(e,t,r,n,_,i){F(t>0);var o=Ht(t,r);_=It(n,_);var a=[i],s=[];we([],[e],function(e){e=e[0];var r="constructor "+e.name;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new He("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[t-1]=function(){Xt("Cannot construct "+e.name+" due to unbound types",o)},we([],o,function(n){return e.registeredClass.constructor_body[t-1]=function(){arguments.length!==t-1&&$e(r+" called with "+arguments.length+" arguments, expected "+(t-1)),s.length=0,a.length=t;for(var e=1;e<t;++e)a[e]=n[e].toWireType(s,arguments[e-1]);var i=_.apply(null,a);return Fe(s),n[0].fromWireType(i)},[]}),[]})}function kt(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var r=me(e.name||"unknownFunctionName",function(){});r.prototype=e.prototype;var n=new r,_=e.apply(n,t);return _ instanceof Object?_:n}function Wt(e,t,r,n,_){var i=t.length;i<2&&$e("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var o=null!==t[1]&&null!==r,a=!1,s=1;s<t.length;++s)if(null!==t[s]&&void 0===t[s].destructorFunction){a=!0;break}var u="void"!==t[0].name,R="",c="";for(s=0;s<i-2;++s)R+=(0!==s?", ":"")+"arg"+s,c+=(0!==s?", ":"")+"arg"+s+"Wired";var f="return function "+Ve(e)+"("+R+") {\nif (arguments.length !== "+(i-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(i-2)+" args!');\n}\n";a&&(f+="var destructors = [];\n");var T=a?"destructors":"null",A=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],l=[$e,n,_,Fe,t[0],t[1]];o&&(f+="var thisWired = classParam.toWireType("+T+", this);\n");for(s=0;s<i-2;++s)f+="var arg"+s+"Wired = argType"+s+".toWireType("+T+", arg"+s+"); // "+t[s+2].name+"\n",A.push("argType"+s),l.push(t[s+2]);if(o&&(c="thisWired"+(c.length>0?", ":"")+c),f+=(u?"var rv = ":"")+"invoker(fn"+(c.length>0?", ":"")+c+");\n",a)f+="runDestructors(destructors);\n";else for(s=o?1:2;s<t.length;++s){var O=1===s?"thisWired":"arg"+(s-2)+"Wired";null!==t[s].destructorFunction&&(f+=O+"_dtor("+O+"); // "+t[s].name+"\n",A.push(O+"_dtor"),l.push(t[s].destructorFunction))}u&&(f+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),f+="}\n",A.push(f);var p=kt(Function,A).apply(null,l);return p}function jt(e,t,r,n,_,i,o,a){var s=Ht(r,n);t=xe(t),i=It(_,i),we([],[e],function(e){e=e[0];var n=e.name+"."+t;function _(){Xt("Cannot call "+n+" due to unbound types",s)}a&&e.registeredClass.pureVirtualFunctions.push(t);var u=e.registeredClass.instancePrototype,R=u[t];return void 0===R||void 0===R.overloadTable&&R.className!==e.name&&R.argCount===r-2?(_.argCount=r-2,_.className=e.name,u[t]=_):(ct(u,t,n),u[t].overloadTable[r-2]=_),we([],s,function(_){var a=Wt(n,_,e,i,o);return void 0===u[t].overloadTable?(a.argCount=r-2,u[t]=a):u[t].overloadTable[r-2]=a,[]}),[]})}function zt(e,t,r){e=xe(e),we([],[t],function(t){return t=t[0],_[e]=t.fromWireType(r),[]})}var Yt=[],qt=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Jt(e){e>4&&0===--qt[e].refcount&&(qt[e]=void 0,Yt.push(e))}function Zt(){for(var e=0,t=5;t<qt.length;++t)void 0!==qt[t]&&++e;return e}function Qt(){for(var e=5;e<qt.length;++e)if(void 0!==qt[e])return qt[e];return null}function er(){_.count_emval_handles=Zt,_.get_first_emval=Qt}function tr(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=Yt.length?Yt.pop():qt.length;return qt[t]={refcount:1,value:e},t}}function rr(e,t){t=xe(t),ke(e,{name:t,fromWireType:function(e){var t=qt[e].value;return Jt(e),t},toWireType:function(e,t){return tr(t)},argPackAdvance:8,readValueFromPointer:ye,destructorFunction:null})}function nr(e,t,r){switch(t){case 0:return function(e){var t=r?m:U;return this.fromWireType(t[e])};case 1:return function(e){var t=r?g:L;return this.fromWireType(t[e>>1])};case 2:return function(e){var t=r?w:I;return this.fromWireType(t[e>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function _r(e,t,r,n){var _=De(r);function i(){}t=xe(t),i.values={},ke(e,{name:t,constructor:i,fromWireType:function(e){return this.constructor.values[e]},toWireType:function(e,t){return t.value},argPackAdvance:8,readValueFromPointer:nr(t,_,n),destructorFunction:null}),ft(t,i)}function ir(e,t){var r=Ee[e];return void 0===r&&$e(t+" has unknown type "+bt(e)),r}function or(e,t,r){var n=ir(e,"enum");t=xe(t);var _=n.constructor,i=Object.create(n.constructor.prototype,{value:{value:r},constructor:{value:me(n.name+"_"+t,function(){})}});_.values[r]=i,_[t]=i}function ar(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function sr(e,t){switch(t){case 2:return function(e){return this.fromWireType(D[e>>2])};case 3:return function(e){return this.fromWireType(b[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function ur(e,t,r){var n=De(r);t=xe(t),ke(e,{name:t,fromWireType:function(e){return e},toWireType:function(e,t){if("number"!=typeof t&&"boolean"!=typeof t)throw new TypeError('Cannot convert "'+ar(t)+'" to '+this.name);return t},argPackAdvance:8,readValueFromPointer:sr(t,n),destructorFunction:null})}function Rr(e,t,r,n,_,i){var o=Ht(t,r);e=xe(e),_=It(n,_),ft(e,function(){Xt("Cannot call "+e+" due to unbound types",o)},t-1),we([],o,function(r){var n=[r[0],null].concat(r.slice(1));return Ut(e,Wt(e,n,null,_,i),t-1),[]})}function cr(e,t,r){switch(t){case 0:return r?function(e){return m[e]}:function(e){return U[e]};case 1:return r?function(e){return g[e>>1]}:function(e){return L[e>>1]};case 2:return r?function(e){return w[e>>2]}:function(e){return I[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function fr(e,t,r,n,_){t=xe(t),-1===_&&(_=4294967295);var i=De(r),o=function(e){return e};if(0===n){var a=32-8*r;o=function(e){return e<<a>>>a}}var s=-1!=t.indexOf("unsigned");ke(e,{name:t,fromWireType:o,toWireType:function(e,r){if("number"!=typeof r&&"boolean"!=typeof r)throw new TypeError('Cannot convert "'+ar(r)+'" to '+this.name);if(r<n||r>_)throw new TypeError('Passing a number "'+ar(r)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+n+", "+_+"]!");return s?r>>>0:0|r},argPackAdvance:8,readValueFromPointer:cr(t,i,0!==n),destructorFunction:null})}function Tr(e,t,r){var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],_=n[t];function i(e){e>>=2;var t=I,r=t[e],n=t[e+1];return new _(V,n,r)}r=xe(r),ke(e,{name:r,fromWireType:i,argPackAdvance:8,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})}function Ar(e,t){t=xe(t);var r="std::string"===t;ke(e,{name:t,fromWireType:function(e){var t,n=I[e>>2];if(r)for(var _=e+4,i=0;i<=n;++i){var o=e+4+i;if(i==n||0==U[o]){var a=o-_,s=E(_,a);void 0===t?t=s:(t+="\0",t+=s),_=o+1}}else{var u=new Array(n);for(i=0;i<n;++i)u[i]=String.fromCharCode(U[e+4+i]);t=u.join("")}return qr(e),t},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var n,_="string"==typeof t;_||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||$e("Cannot pass non-string to std::string"),n=r&&_?function(){return S(t)}:function(){return t.length};var i=n(),o=Yr(4+i+1);if(I[o>>2]=i,r&&_)P(t,o+4,i+1);else if(_)for(var a=0;a<i;++a){var s=t.charCodeAt(a);s>255&&(qr(o),$e("String has UTF-16 code units that do not fit in 8 bits")),U[o+4+a]=s}else for(a=0;a<i;++a)U[o+4+a]=t[a];return null!==e&&e.push(qr,o),o},argPackAdvance:8,readValueFromPointer:ye,destructorFunction:function(e){qr(e)}})}function lr(e,t,r){var n,_,i,o,a;r=xe(r),2===t?(n=x,_=H,o=$,i=function(){return L},a=1):4===t&&(n=k,_=W,o=j,i=function(){return I},a=2),ke(e,{name:r,fromWireType:function(e){for(var r,_=I[e>>2],o=i(),s=e+4,u=0;u<=_;++u){var R=e+4+u*t;if(u==_||0==o[R>>a]){var c=R-s,f=n(s,c);void 0===r?r=f:(r+="\0",r+=f),s=R+t}}return qr(e),r},toWireType:function(e,n){"string"!=typeof n&&$e("Cannot pass non-string to C++ string type "+r);var i=o(n),s=Yr(4+i+t);return I[s>>2]=i>>a,_(n,s+4,i+t),null!==e&&e.push(qr,s),s},argPackAdvance:8,readValueFromPointer:ye,destructorFunction:function(e){qr(e)}})}function Or(e,t,r,n,_,i){Ke[e]={name:xe(t),rawConstructor:It(r,n),rawDestructor:It(_,i),fields:[]}}function pr(e,t,r,n,_,i,o,a,s,u){Ke[e].fields.push({fieldName:xe(t),getterReturnType:r,getter:It(n,_),getterContext:i,setterArgumentType:o,setter:It(a,s),setterContext:u})}function Cr(e,t){t=xe(t),ke(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})}function Br(e){return e||$e("Cannot use deleted val. handle = "+e),qt[e].value}function Gr(e,t,r){e=Br(e),t=ir(t,"emval::as");var n=[],_=tr(n);return w[r>>2]=_,t.toWireType(n,e)}var Mr={};function dr(e){var t=Mr[e];return void 0===t?xe(e):t}var hr=[];function Kr(e,t,r,n){e=hr[e],t=Br(t),r=dr(r),e(t,r,null,n)}function Fr(){return"object"==typeof globalThis?globalThis:function(){return Function}()("return this")()}function yr(e){return 0===e?tr(Fr()):(e=dr(e),tr(Fr()[e]))}function Nr(e){var t=hr.length;return hr.push(e),t}function Er(e,t){for(var r=new Array(e),n=0;n<e;++n)r[n]=ir(w[(t>>2)+n],"parameter "+n);return r}function vr(e,t){for(var r=Er(e,t),n=r[0],_=n.name+"_$"+r.slice(1).map(function(e){return e.name}).join("_")+"$",i=["retType"],o=[n],a="",s=0;s<e-1;++s)a+=(0!==s?", ":"")+"arg"+s,i.push("argType"+s),o.push(r[1+s]);var u=Ve("methodCaller_"+_),R="return function "+u+"(handle, name, destructors, args) {\n",c=0;for(s=0;s<e-1;++s)R+="    var arg"+s+" = argType"+s+".readValueFromPointer(args"+(c?"+"+c:"")+");\n",c+=r[s+1].argPackAdvance;R+="    var rv = handle[name]("+a+");\n";for(s=0;s<e-1;++s)r[s+1].deleteObject&&(R+="    argType"+s+".deleteObject(arg"+s+");\n");n.isVoid||(R+="    return retType.toWireType(destructors, rv);\n"),R+="};\n",i.push(R);var f=kt(Function,i).apply(null,o);return Nr(f)}function Pr(e){return e=dr(e),tr(_[e])}function Sr(e,t){return e=Br(e),t=Br(t),tr(e[t])}function Vr(e){e>4&&(qt[e].refcount+=1)}function mr(e){for(var t="",r=0;r<e;++r)t+=(0!==r?", ":"")+"arg"+r;var n="return function emval_allocator_"+e+"(constructor, argTypes, args) {\n";for(r=0;r<e;++r)n+="var argType"+r+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+r+'], "parameter '+r+'");\nvar arg'+r+" = argType"+r+".readValueFromPointer(args);\nargs += argType"+r+"['argPackAdvance'];\n";return n+="var obj = new constructor("+t+");\nreturn __emval_register(obj);\n}\n",new Function("requireRegisteredType","Module","__emval_register",n)(ir,_,tr)}var Ur={};function gr(e,t,r,n){e=Br(e);var _=Ur[t];return _||(_=mr(t),Ur[t]=_),_(e,r,n)}function Lr(e){return tr(dr(e))}function wr(e){var t=qt[e].value;Fe(t),Jt(e)}function Ir(){Te()}function Dr(e,t,r){U.copyWithin(e,t,t+r)}function br(e){try{return h.grow(e-V.byteLength+65535>>>16),Y(h.buffer),1}catch{}}function Xr(e){var t=U.length;e>>>=0;var r=2147483648;if(e>r)return!1;for(var n=1;n<=4;n*=2){var _=t*(1+.2/n);_=Math.min(_,e+100663296);var i=Math.min(r,z(Math.max(e,_),65536)),o=br(i);if(o)return!0}return!1}var xr={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var r=xr.buffers[e];0===t||10===t?((1===e?B:G)(N(r,0)),r.length=0):r.push(t)},varargs:void 0,get:function(){xr.varargs+=4;var e=w[xr.varargs-4>>2];return e},getStr:function(e){var t=E(e);return t},get64:function(e,t){return e}};function Hr(e){return 0}function $r(e,t,r,n,_){}function kr(e,t,r,n){for(var _=0,i=0;i<r;i++){for(var o=w[t+8*i>>2],a=w[t+(8*i+4)>>2],s=0;s<a;s++)xr.printChar(e,U[o+s]);_+=a}return w[n>>2]=_,0}function Wr(e){d(0|e)}ge=_.InternalError=Ue(Error,"InternalError"),be(),He=_.BindingError=Ue(Error,"BindingError"),st(),St(),Ft(),Dt=_.UnboundTypeError=Ue(Error,"UnboundTypeError"),er();var jr,zr={t:Ie,I:We,x:xt,w:$t,d:jt,k:zt,H:rr,n:_r,a:or,A:ur,i:Rr,j:fr,h:Tr,B:Ar,v:lr,u:Or,c:pr,J:Cr,m:Gr,s:Kr,b:Jt,y:yr,p:vr,r:Pr,e:Sr,g:Vr,q:gr,f:Lr,l:wr,o:Ir,E:Dr,F:Xr,G:Hr,C:$r,z:kr,D:Wr},Yr=(de(),_.___wasm_call_ctors=function(){return(_.___wasm_call_ctors=_.asm.L).apply(null,arguments)},_._malloc=function(){return(Yr=_._malloc=_.asm.M).apply(null,arguments)}),qr=_._free=function(){return(qr=_._free=_.asm.N).apply(null,arguments)},Jr=_.___getTypeName=function(){return(Jr=_.___getTypeName=_.asm.P).apply(null,arguments)};_.___embind_register_native_and_builtin_types=function(){return(_.___embind_register_native_and_builtin_types=_.asm.Q).apply(null,arguments)},_.dynCall_jiji=function(){return(_.dynCall_jiji=_.asm.R).apply(null,arguments)};function Zr(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Qr(e){function t(){jr||(jr=!0,_.calledRun=!0,!K&&(re(),ne(),r(_),_.onRuntimeInitialized&&_.onRuntimeInitialized(),_e()))}e=e||a,se>0||(te(),se>0)||(_.setStatus?(_.setStatus("Running..."),setTimeout(function(){setTimeout(function(){_.setStatus("")},1),t()},1)):t())}if(Re=function e(){jr||Qr(),jr||(Re=e)},_.run=Qr,_.preInit)for("function"==typeof _.preInit&&(_.preInit=[_.preInit]);_.preInit.length>0;)_.preInit.pop()();return Qr(),t.ready}}();"object"==typeof e&&"object"==typeof t?t.exports=r:"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof e&&(e.BASIS=r)}),C={UNSIGNED_BYTE:f.UNSIGNED_BYTE,UNSIGNED_SHORT:f.UNSIGNED_SHORT,UNSIGNED_INT:f.UNSIGNED_INT,FLOAT:f.FLOAT,HALF_FLOAT:f.HALF_FLOAT_OES,UNSIGNED_INT_24_8:f.UNSIGNED_INT_24_8,UNSIGNED_SHORT_4_4_4_4:f.UNSIGNED_SHORT_4_4_4_4,UNSIGNED_SHORT_5_5_5_1:f.UNSIGNED_SHORT_5_5_5_1,UNSIGNED_SHORT_5_6_5:f.UNSIGNED_SHORT_5_6_5,toWebGLConstant:function(e,t){switch(e){case C.UNSIGNED_BYTE:return f.UNSIGNED_BYTE;case C.UNSIGNED_SHORT:return f.UNSIGNED_SHORT;case C.UNSIGNED_INT:return f.UNSIGNED_INT;case C.FLOAT:return f.FLOAT;case C.HALF_FLOAT:return t.webgl2?f.HALF_FLOAT:f.HALF_FLOAT_OES;case C.UNSIGNED_INT_24_8:return f.UNSIGNED_INT_24_8;case C.UNSIGNED_SHORT_4_4_4_4:return f.UNSIGNED_SHORT_4_4_4_4;case C.UNSIGNED_SHORT_5_5_5_1:return f.UNSIGNED_SHORT_5_5_5_1;case C.UNSIGNED_SHORT_5_6_5:return C.UNSIGNED_SHORT_5_6_5}},isPacked:function(e){return e===C.UNSIGNED_INT_24_8||e===C.UNSIGNED_SHORT_4_4_4_4||e===C.UNSIGNED_SHORT_5_5_5_1||e===C.UNSIGNED_SHORT_5_6_5},sizeInBytes:function(e){switch(e){case C.UNSIGNED_BYTE:return 1;case C.UNSIGNED_SHORT:case C.UNSIGNED_SHORT_4_4_4_4:case C.UNSIGNED_SHORT_5_5_5_1:case C.UNSIGNED_SHORT_5_6_5:case C.HALF_FLOAT:return 2;case C.UNSIGNED_INT:case C.FLOAT:case C.UNSIGNED_INT_24_8:return 4}},validate:function(e){return e===C.UNSIGNED_BYTE||e===C.UNSIGNED_SHORT||e===C.UNSIGNED_INT||e===C.FLOAT||e===C.HALF_FLOAT||e===C.UNSIGNED_INT_24_8||e===C.UNSIGNED_SHORT_4_4_4_4||e===C.UNSIGNED_SHORT_5_5_5_1||e===C.UNSIGNED_SHORT_5_6_5},getTypedArrayConstructor:function(e){let t=C.sizeInBytes(e);return t===Uint8Array.BYTES_PER_ELEMENT?Uint8Array:t===Uint16Array.BYTES_PER_ELEMENT?Uint16Array:t===Float32Array.BYTES_PER_ELEMENT&&e===C.FLOAT?Float32Array:Uint32Array}},y=Object.freeze(C),i={DEPTH_COMPONENT:f.DEPTH_COMPONENT,DEPTH_STENCIL:f.DEPTH_STENCIL,ALPHA:f.ALPHA,RED:f.RED,RG:f.RG,RGB:f.RGB,RGBA:f.RGBA,RED_INTEGER:f.RED_INTEGER,RG_INTEGER:f.RG_INTEGER,RGB_INTEGER:f.RGB_INTEGER,RGBA_INTEGER:f.RGBA_INTEGER,LUMINANCE:f.LUMINANCE,LUMINANCE_ALPHA:f.LUMINANCE_ALPHA,RGB_DXT1:f.COMPRESSED_RGB_S3TC_DXT1_EXT,RGBA_DXT1:f.COMPRESSED_RGBA_S3TC_DXT1_EXT,RGBA_DXT3:f.COMPRESSED_RGBA_S3TC_DXT3_EXT,RGBA_DXT5:f.COMPRESSED_RGBA_S3TC_DXT5_EXT,RGB_PVRTC_4BPPV1:f.COMPRESSED_RGB_PVRTC_4BPPV1_IMG,RGB_PVRTC_2BPPV1:f.COMPRESSED_RGB_PVRTC_2BPPV1_IMG,RGBA_PVRTC_4BPPV1:f.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG,RGBA_PVRTC_2BPPV1:f.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG,RGBA_ASTC:f.COMPRESSED_RGBA_ASTC_4x4_WEBGL,RGB_ETC1:f.COMPRESSED_RGB_ETC1_WEBGL,RGB8_ETC2:f.COMPRESSED_RGB8_ETC2,RGBA8_ETC2_EAC:f.COMPRESSED_RGBA8_ETC2_EAC,RGBA_BC7:f.COMPRESSED_RGBA_BPTC_UNORM,componentsLength:function(e){switch(e){case i.RGB:case i.RGB_INTEGER:return 3;case i.RGBA:case i.RGBA_INTEGER:return 4;case i.LUMINANCE_ALPHA:case i.RG:case i.RG_INTEGER:return 2;case i.ALPHA:case i.RED:case i.RED_INTEGER:case i.LUMINANCE:return 1;default:return 1}},validate:function(e){return e===i.DEPTH_COMPONENT||e===i.DEPTH_STENCIL||e===i.ALPHA||e===i.RED||e===i.RG||e===i.RGB||e===i.RGBA||e===i.RED_INTEGER||e===i.RG_INTEGER||e===i.RGB_INTEGER||e===i.RGBA_INTEGER||e===i.LUMINANCE||e===i.LUMINANCE_ALPHA||e===i.RGB_DXT1||e===i.RGBA_DXT1||e===i.RGBA_DXT3||e===i.RGBA_DXT5||e===i.RGB_PVRTC_4BPPV1||e===i.RGB_PVRTC_2BPPV1||e===i.RGBA_PVRTC_4BPPV1||e===i.RGBA_PVRTC_2BPPV1||e===i.RGBA_ASTC||e===i.RGB_ETC1||e===i.RGB8_ETC2||e===i.RGBA8_ETC2_EAC||e===i.RGBA_BC7},isColorFormat:function(e){return e===i.RED||e===i.ALPHA||e===i.RGB||e===i.RGBA||e===i.LUMINANCE||e===i.LUMINANCE_ALPHA},isDepthFormat:function(e){return e===i.DEPTH_COMPONENT||e===i.DEPTH_STENCIL},isCompressedFormat:function(e){return e===i.RGB_DXT1||e===i.RGBA_DXT1||e===i.RGBA_DXT3||e===i.RGBA_DXT5||e===i.RGB_PVRTC_4BPPV1||e===i.RGB_PVRTC_2BPPV1||e===i.RGBA_PVRTC_4BPPV1||e===i.RGBA_PVRTC_2BPPV1||e===i.RGBA_ASTC||e===i.RGB_ETC1||e===i.RGB8_ETC2||e===i.RGBA8_ETC2_EAC||e===i.RGBA_BC7},isDXTFormat:function(e){return e===i.RGB_DXT1||e===i.RGBA_DXT1||e===i.RGBA_DXT3||e===i.RGBA_DXT5},isPVRTCFormat:function(e){return e===i.RGB_PVRTC_4BPPV1||e===i.RGB_PVRTC_2BPPV1||e===i.RGBA_PVRTC_4BPPV1||e===i.RGBA_PVRTC_2BPPV1},isASTCFormat:function(e){return e===i.RGBA_ASTC},isETC1Format:function(e){return e===i.RGB_ETC1},isETC2Format:function(e){return e===i.RGB8_ETC2||e===i.RGBA8_ETC2_EAC},isBC7Format:function(e){return e===i.RGBA_BC7},compressedTextureSizeInBytes:function(e,t,r){switch(e){case i.RGB_DXT1:case i.RGBA_DXT1:case i.RGB_ETC1:case i.RGB8_ETC2:return Math.floor((t+3)/4)*Math.floor((r+3)/4)*8;case i.RGBA_DXT3:case i.RGBA_DXT5:case i.RGBA_ASTC:case i.RGBA8_ETC2_EAC:return Math.floor((t+3)/4)*Math.floor((r+3)/4)*16;case i.RGB_PVRTC_4BPPV1:case i.RGBA_PVRTC_4BPPV1:return Math.floor((Math.max(t,8)*Math.max(r,8)*4+7)/8);case i.RGB_PVRTC_2BPPV1:case i.RGBA_PVRTC_2BPPV1:return Math.floor((Math.max(t,16)*Math.max(r,8)*2+7)/8);case i.RGBA_BC7:return Math.ceil(t/4)*Math.ceil(r/4)*16;default:return 0}},textureSizeInBytes:function(e,t,r,n){let _=i.componentsLength(e);return y.isPacked(t)&&(_=1),_*y.sizeInBytes(t)*r*n},texture3DSizeInBytes:function(e,t,r,n,_){let o=i.componentsLength(e);return y.isPacked(t)&&(o=1),o*y.sizeInBytes(t)*r*n*_},alignmentInBytes:function(e,t,r){let n=i.textureSizeInBytes(e,t,r,1)%4;return 0===n?4:2===n?2:1},createTypedArray:function(e,t,r,n){let _=y.getTypedArrayConstructor(t),o=i.componentsLength(e)*r*n;return new _(o)},flipY:function(e,t,r,n,_){if(1===_)return e;let o=i.createTypedArray(t,r,n,_),a=i.componentsLength(t),s=n*a;for(let i=0;i<_;++i){let t=i*n*a,r=(_-i-1)*n*a;for(let n=0;n<s;++n)o[r+n]=e[t+n]}return o},toInternalFormat:function(e,t,r){if(!r.webgl2)return e;if(e===i.DEPTH_STENCIL)return f.DEPTH24_STENCIL8;if(e===i.DEPTH_COMPONENT){if(t===y.UNSIGNED_SHORT)return f.DEPTH_COMPONENT16;if(t===y.UNSIGNED_INT)return f.DEPTH_COMPONENT24}if(t===y.FLOAT)switch(e){case i.RGBA:return f.RGBA32F;case i.RGB:return f.RGB32F;case i.RG:return f.RG32F;case i.RED:return f.R32F}if(t===y.HALF_FLOAT)switch(e){case i.RGBA:return f.RGBA16F;case i.RGB:return f.RGB16F;case i.RG:return f.RG16F;case i.RED:return f.R16F}if(t===y.UNSIGNED_BYTE)switch(e){case i.RGBA:return f.RGBA8;case i.RGB:return f.RGB8;case i.RG:return f.RG8;case i.RED:return f.R8}if(t===y.INT)switch(e){case i.RGBA_INTEGER:return f.RGBA32I;case i.RGB_INTEGER:return f.RGB32I;case i.RG_INTEGER:return f.RG32I;case i.RED_INTEGER:return f.R32I}if(t===y.UNSIGNED_INT)switch(e){case i.RGBA_INTEGER:return f.RGBA32UI;case i.RGB_INTEGER:return f.RGB32UI;case i.RG_INTEGER:return f.RG32UI;case i.RED_INTEGER:return f.R32UI}return e}},U=Object.freeze(i),or={VK_FORMAT_UNDEFINED:0,VK_FORMAT_R4G4_UNORM_PACK8:1,VK_FORMAT_R4G4B4A4_UNORM_PACK16:2,VK_FORMAT_B4G4R4A4_UNORM_PACK16:3,VK_FORMAT_R5G6B5_UNORM_PACK16:4,VK_FORMAT_B5G6R5_UNORM_PACK16:5,VK_FORMAT_R5G5B5A1_UNORM_PACK16:6,VK_FORMAT_B5G5R5A1_UNORM_PACK16:7,VK_FORMAT_A1R5G5B5_UNORM_PACK16:8,VK_FORMAT_R8_UNORM:9,VK_FORMAT_R8_SNORM:10,VK_FORMAT_R8_USCALED:11,VK_FORMAT_R8_SSCALED:12,VK_FORMAT_R8_UINT:13,VK_FORMAT_R8_SINT:14,VK_FORMAT_R8_SRGB:15,VK_FORMAT_R8G8_UNORM:16,VK_FORMAT_R8G8_SNORM:17,VK_FORMAT_R8G8_USCALED:18,VK_FORMAT_R8G8_SSCALED:19,VK_FORMAT_R8G8_UINT:20,VK_FORMAT_R8G8_SINT:21,VK_FORMAT_R8G8_SRGB:22,VK_FORMAT_R8G8B8_UNORM:23,VK_FORMAT_R8G8B8_SNORM:24,VK_FORMAT_R8G8B8_USCALED:25,VK_FORMAT_R8G8B8_SSCALED:26,VK_FORMAT_R8G8B8_UINT:27,VK_FORMAT_R8G8B8_SINT:28,VK_FORMAT_R8G8B8_SRGB:29,VK_FORMAT_B8G8R8_UNORM:30,VK_FORMAT_B8G8R8_SNORM:31,VK_FORMAT_B8G8R8_USCALED:32,VK_FORMAT_B8G8R8_SSCALED:33,VK_FORMAT_B8G8R8_UINT:34,VK_FORMAT_B8G8R8_SINT:35,VK_FORMAT_B8G8R8_SRGB:36,VK_FORMAT_R8G8B8A8_UNORM:37,VK_FORMAT_R8G8B8A8_SNORM:38,VK_FORMAT_R8G8B8A8_USCALED:39,VK_FORMAT_R8G8B8A8_SSCALED:40,VK_FORMAT_R8G8B8A8_UINT:41,VK_FORMAT_R8G8B8A8_SINT:42,VK_FORMAT_R8G8B8A8_SRGB:43,VK_FORMAT_B8G8R8A8_UNORM:44,VK_FORMAT_B8G8R8A8_SNORM:45,VK_FORMAT_B8G8R8A8_USCALED:46,VK_FORMAT_B8G8R8A8_SSCALED:47,VK_FORMAT_B8G8R8A8_UINT:48,VK_FORMAT_B8G8R8A8_SINT:49,VK_FORMAT_B8G8R8A8_SRGB:50,VK_FORMAT_A8B8G8R8_UNORM_PACK32:51,VK_FORMAT_A8B8G8R8_SNORM_PACK32:52,VK_FORMAT_A8B8G8R8_USCALED_PACK32:53,VK_FORMAT_A8B8G8R8_SSCALED_PACK32:54,VK_FORMAT_A8B8G8R8_UINT_PACK32:55,VK_FORMAT_A8B8G8R8_SINT_PACK32:56,VK_FORMAT_A8B8G8R8_SRGB_PACK32:57,VK_FORMAT_A2R10G10B10_UNORM_PACK32:58,VK_FORMAT_A2R10G10B10_SNORM_PACK32:59,VK_FORMAT_A2R10G10B10_USCALED_PACK32:60,VK_FORMAT_A2R10G10B10_SSCALED_PACK32:61,VK_FORMAT_A2R10G10B10_UINT_PACK32:62,VK_FORMAT_A2R10G10B10_SINT_PACK32:63,VK_FORMAT_A2B10G10R10_UNORM_PACK32:64,VK_FORMAT_A2B10G10R10_SNORM_PACK32:65,VK_FORMAT_A2B10G10R10_USCALED_PACK32:66,VK_FORMAT_A2B10G10R10_SSCALED_PACK32:67,VK_FORMAT_A2B10G10R10_UINT_PACK32:68,VK_FORMAT_A2B10G10R10_SINT_PACK32:69,VK_FORMAT_R16_UNORM:70,VK_FORMAT_R16_SNORM:71,VK_FORMAT_R16_USCALED:72,VK_FORMAT_R16_SSCALED:73,VK_FORMAT_R16_UINT:74,VK_FORMAT_R16_SINT:75,VK_FORMAT_R16_SFLOAT:76,VK_FORMAT_R16G16_UNORM:77,VK_FORMAT_R16G16_SNORM:78,VK_FORMAT_R16G16_USCALED:79,VK_FORMAT_R16G16_SSCALED:80,VK_FORMAT_R16G16_UINT:81,VK_FORMAT_R16G16_SINT:82,VK_FORMAT_R16G16_SFLOAT:83,VK_FORMAT_R16G16B16_UNORM:84,VK_FORMAT_R16G16B16_SNORM:85,VK_FORMAT_R16G16B16_USCALED:86,VK_FORMAT_R16G16B16_SSCALED:87,VK_FORMAT_R16G16B16_UINT:88,VK_FORMAT_R16G16B16_SINT:89,VK_FORMAT_R16G16B16_SFLOAT:90,VK_FORMAT_R16G16B16A16_UNORM:91,VK_FORMAT_R16G16B16A16_SNORM:92,VK_FORMAT_R16G16B16A16_USCALED:93,VK_FORMAT_R16G16B16A16_SSCALED:94,VK_FORMAT_R16G16B16A16_UINT:95,VK_FORMAT_R16G16B16A16_SINT:96,VK_FORMAT_R16G16B16A16_SFLOAT:97,VK_FORMAT_R32_UINT:98,VK_FORMAT_R32_SINT:99,VK_FORMAT_R32_SFLOAT:100,VK_FORMAT_R32G32_UINT:101,VK_FORMAT_R32G32_SINT:102,VK_FORMAT_R32G32_SFLOAT:103,VK_FORMAT_R32G32B32_UINT:104,VK_FORMAT_R32G32B32_SINT:105,VK_FORMAT_R32G32B32_SFLOAT:106,VK_FORMAT_R32G32B32A32_UINT:107,VK_FORMAT_R32G32B32A32_SINT:108,VK_FORMAT_R32G32B32A32_SFLOAT:109,VK_FORMAT_R64_UINT:110,VK_FORMAT_R64_SINT:111,VK_FORMAT_R64_SFLOAT:112,VK_FORMAT_R64G64_UINT:113,VK_FORMAT_R64G64_SINT:114,VK_FORMAT_R64G64_SFLOAT:115,VK_FORMAT_R64G64B64_UINT:116,VK_FORMAT_R64G64B64_SINT:117,VK_FORMAT_R64G64B64_SFLOAT:118,VK_FORMAT_R64G64B64A64_UINT:119,VK_FORMAT_R64G64B64A64_SINT:120,VK_FORMAT_R64G64B64A64_SFLOAT:121,VK_FORMAT_B10G11R11_UFLOAT_PACK32:122,VK_FORMAT_E5B9G9R9_UFLOAT_PACK32:123,VK_FORMAT_D16_UNORM:124,VK_FORMAT_X8_D24_UNORM_PACK32:125,VK_FORMAT_D32_SFLOAT:126,VK_FORMAT_S8_UINT:127,VK_FORMAT_D16_UNORM_S8_UINT:128,VK_FORMAT_D24_UNORM_S8_UINT:129,VK_FORMAT_D32_SFLOAT_S8_UINT:130,VK_FORMAT_BC1_RGB_UNORM_BLOCK:131,VK_FORMAT_BC1_RGB_SRGB_BLOCK:132,VK_FORMAT_BC1_RGBA_UNORM_BLOCK:133,VK_FORMAT_BC1_RGBA_SRGB_BLOCK:134,VK_FORMAT_BC2_UNORM_BLOCK:135,VK_FORMAT_BC2_SRGB_BLOCK:136,VK_FORMAT_BC3_UNORM_BLOCK:137,VK_FORMAT_BC3_SRGB_BLOCK:138,VK_FORMAT_BC4_UNORM_BLOCK:139,VK_FORMAT_BC4_SNORM_BLOCK:140,VK_FORMAT_BC5_UNORM_BLOCK:141,VK_FORMAT_BC5_SNORM_BLOCK:142,VK_FORMAT_BC6H_UFLOAT_BLOCK:143,VK_FORMAT_BC6H_SFLOAT_BLOCK:144,VK_FORMAT_BC7_UNORM_BLOCK:145,VK_FORMAT_BC7_SRGB_BLOCK:146,VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK:147,VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK:148,VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK:149,VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK:150,VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK:151,VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK:152,VK_FORMAT_EAC_R11_UNORM_BLOCK:153,VK_FORMAT_EAC_R11_SNORM_BLOCK:154,VK_FORMAT_EAC_R11G11_UNORM_BLOCK:155,VK_FORMAT_EAC_R11G11_SNORM_BLOCK:156,VK_FORMAT_ASTC_4x4_UNORM_BLOCK:157,VK_FORMAT_ASTC_4x4_SRGB_BLOCK:158,VK_FORMAT_ASTC_5x4_UNORM_BLOCK:159,VK_FORMAT_ASTC_5x4_SRGB_BLOCK:160,VK_FORMAT_ASTC_5x5_UNORM_BLOCK:161,VK_FORMAT_ASTC_5x5_SRGB_BLOCK:162,VK_FORMAT_ASTC_6x5_UNORM_BLOCK:163,VK_FORMAT_ASTC_6x5_SRGB_BLOCK:164,VK_FORMAT_ASTC_6x6_UNORM_BLOCK:165,VK_FORMAT_ASTC_6x6_SRGB_BLOCK:166,VK_FORMAT_ASTC_8x5_UNORM_BLOCK:167,VK_FORMAT_ASTC_8x5_SRGB_BLOCK:168,VK_FORMAT_ASTC_8x6_UNORM_BLOCK:169,VK_FORMAT_ASTC_8x6_SRGB_BLOCK:170,VK_FORMAT_ASTC_8x8_UNORM_BLOCK:171,VK_FORMAT_ASTC_8x8_SRGB_BLOCK:172,VK_FORMAT_ASTC_10x5_UNORM_BLOCK:173,VK_FORMAT_ASTC_10x5_SRGB_BLOCK:174,VK_FORMAT_ASTC_10x6_UNORM_BLOCK:175,VK_FORMAT_ASTC_10x6_SRGB_BLOCK:176,VK_FORMAT_ASTC_10x8_UNORM_BLOCK:177,VK_FORMAT_ASTC_10x8_SRGB_BLOCK:178,VK_FORMAT_ASTC_10x10_UNORM_BLOCK:179,VK_FORMAT_ASTC_10x10_SRGB_BLOCK:180,VK_FORMAT_ASTC_12x10_UNORM_BLOCK:181,VK_FORMAT_ASTC_12x10_SRGB_BLOCK:182,VK_FORMAT_ASTC_12x12_UNORM_BLOCK:183,VK_FORMAT_ASTC_12x12_SRGB_BLOCK:184,VK_FORMAT_G8B8G8R8_422_UNORM:1000156e3,VK_FORMAT_B8G8R8G8_422_UNORM:1000156001,VK_FORMAT_G8_B8_R8_3PLANE_420_UNORM:1000156002,VK_FORMAT_G8_B8R8_2PLANE_420_UNORM:1000156003,VK_FORMAT_G8_B8_R8_3PLANE_422_UNORM:1000156004,VK_FORMAT_G8_B8R8_2PLANE_422_UNORM:1000156005,VK_FORMAT_G8_B8_R8_3PLANE_444_UNORM:1000156006,VK_FORMAT_R10X6_UNORM_PACK16:1000156007,VK_FORMAT_R10X6G10X6_UNORM_2PACK16:1000156008,VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16:1000156009,VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16:1000156010,VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16:1000156011,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_420_UNORM_3PACK16:1000156012,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_420_UNORM_3PACK16:1000156013,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_422_UNORM_3PACK16:1000156014,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_422_UNORM_3PACK16:1000156015,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_444_UNORM_3PACK16:1000156016,VK_FORMAT_R12X4_UNORM_PACK16:1000156017,VK_FORMAT_R12X4G12X4_UNORM_2PACK16:1000156018,VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16:1000156019,VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16:1000156020,VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16:1000156021,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_420_UNORM_3PACK16:1000156022,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_420_UNORM_3PACK16:1000156023,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_422_UNORM_3PACK16:1000156024,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_422_UNORM_3PACK16:1000156025,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_444_UNORM_3PACK16:1000156026,VK_FORMAT_G16B16G16R16_422_UNORM:1000156027,VK_FORMAT_B16G16R16G16_422_UNORM:1000156028,VK_FORMAT_G16_B16_R16_3PLANE_420_UNORM:1000156029,VK_FORMAT_G16_B16R16_2PLANE_420_UNORM:1000156030,VK_FORMAT_G16_B16_R16_3PLANE_422_UNORM:1000156031,VK_FORMAT_G16_B16R16_2PLANE_422_UNORM:1000156032,VK_FORMAT_G16_B16_R16_3PLANE_444_UNORM:1000156033,VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG:1000054e3,VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG:1000054001,VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG:1000054002,VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG:1000054003,VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG:1000054004,VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG:1000054005,VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG:1000054006,VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG:1000054007,VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT:1000066e3,VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT:1000066001,VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT:1000066002,VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT:1000066003,VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT:1000066004,VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT:1000066005,VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT:1000066006,VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT:1000066007,VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT:1000066008,VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT:1000066009,VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT:1000066010,VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT:1000066011,VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT:1000066012,VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT:1000066013,VK_FORMAT_G8B8G8R8_422_UNORM_KHR:1000156e3,VK_FORMAT_B8G8R8G8_422_UNORM_KHR:1000156001,VK_FORMAT_G8_B8_R8_3PLANE_420_UNORM_KHR:1000156002,VK_FORMAT_G8_B8R8_2PLANE_420_UNORM_KHR:1000156003,VK_FORMAT_G8_B8_R8_3PLANE_422_UNORM_KHR:1000156004,VK_FORMAT_G8_B8R8_2PLANE_422_UNORM_KHR:1000156005,VK_FORMAT_G8_B8_R8_3PLANE_444_UNORM_KHR:1000156006,VK_FORMAT_R10X6_UNORM_PACK16_KHR:1000156007,VK_FORMAT_R10X6G10X6_UNORM_2PACK16_KHR:1000156008,VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16_KHR:1000156009,VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16_KHR:1000156010,VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16_KHR:1000156011,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_420_UNORM_3PACK16_KHR:1000156012,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_420_UNORM_3PACK16_KHR:1000156013,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_422_UNORM_3PACK16_KHR:1000156014,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_422_UNORM_3PACK16_KHR:1000156015,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_444_UNORM_3PACK16_KHR:1000156016,VK_FORMAT_R12X4_UNORM_PACK16_KHR:1000156017,VK_FORMAT_R12X4G12X4_UNORM_2PACK16_KHR:1000156018,VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16_KHR:1000156019,VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16_KHR:1000156020,VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16_KHR:1000156021,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_420_UNORM_3PACK16_KHR:1000156022,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_420_UNORM_3PACK16_KHR:1000156023,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_422_UNORM_3PACK16_KHR:1000156024,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_422_UNORM_3PACK16_KHR:1000156025,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_444_UNORM_3PACK16_KHR:1000156026,VK_FORMAT_G16B16G16R16_422_UNORM_KHR:1000156027,VK_FORMAT_B16G16R16G16_422_UNORM_KHR:1000156028,VK_FORMAT_G16_B16_R16_3PLANE_420_UNORM_KHR:1000156029,VK_FORMAT_G16_B16R16_2PLANE_420_UNORM_KHR:1000156030,VK_FORMAT_G16_B16_R16_3PLANE_422_UNORM_KHR:1000156031,VK_FORMAT_G16_B16R16_2PLANE_422_UNORM_KHR:1000156032,VK_FORMAT_G16_B16_R16_3PLANE_444_UNORM_KHR:1000156033},me=Object.freeze(or);function ir(){return{vkFormat:0,typeSize:1,pixelWidth:0,pixelHeight:0,pixelDepth:0,layerCount:0,faceCount:1,supercompressionScheme:0,levels:[],dataFormatDescriptor:[{vendorId:0,descriptorType:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],keyValue:{},globalData:null}}var fe=class{constructor(e,t,r,n){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+t,r),this._littleEndian=n,this._offset=0}_nextUint8(){let e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){let e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){let e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){let e=this._dataView.getUint32(this._offset,this._littleEndian),t=this._dataView.getUint32(this._offset+4,this._littleEndian),r=e+2**32*t;return this._offset+=8,r}_nextInt32(){let e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint8Array(e){let t=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,e);return this._offset+=e,t}_skip(e){return this._offset+=e,this}_scan(e,t=0){let r=this._offset,n=0;for(;this._dataView.getUint8(this._offset)!==t&&n<e;)n++,this._offset++;return n<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+r,n)}},Fr=new Uint8Array([0]),H=[171,75,84,88,32,50,48,187,13,10,26,10];function Rn(e){return(new TextDecoder).decode(e)}function an(e){let t=new Uint8Array(e.buffer,e.byteOffset,H.length);if(t[0]!==H[0]||t[1]!==H[1]||t[2]!==H[2]||t[3]!==H[3]||t[4]!==H[4]||t[5]!==H[5]||t[6]!==H[6]||t[7]!==H[7]||t[8]!==H[8]||t[9]!==H[9]||t[10]!==H[10]||t[11]!==H[11])throw new Error("Missing KTX 2.0 identifier.");let r=ir(),n=17*Uint32Array.BYTES_PER_ELEMENT,_=new fe(e,H.length,n,!0);r.vkFormat=_._nextUint32(),r.typeSize=_._nextUint32(),r.pixelWidth=_._nextUint32(),r.pixelHeight=_._nextUint32(),r.pixelDepth=_._nextUint32(),r.layerCount=_._nextUint32(),r.faceCount=_._nextUint32();let i=_._nextUint32();r.supercompressionScheme=_._nextUint32();let o=_._nextUint32(),a=_._nextUint32(),s=_._nextUint32(),u=_._nextUint32(),R=_._nextUint64(),c=_._nextUint64(),f=3*i*8,T=new fe(e,H.length+n,f,!0);for(let H=0;H<i;H++)r.levels.push({levelData:new Uint8Array(e.buffer,e.byteOffset+T._nextUint64(),T._nextUint64()),uncompressedByteLength:T._nextUint64()});let A=new fe(e,o,a,!0);A._skip(4);let l=A._nextUint16(),O=A._nextUint16(),p=A._nextUint16(),C=A._nextUint16(),B=A._nextUint8(),G=A._nextUint8(),M=A._nextUint8(),d=A._nextUint8(),h=[A._nextUint8(),A._nextUint8(),A._nextUint8(),A._nextUint8()],K=[A._nextUint8(),A._nextUint8(),A._nextUint8(),A._nextUint8(),A._nextUint8(),A._nextUint8(),A._nextUint8(),A._nextUint8()],F={vendorId:l,descriptorType:O,versionNumber:p,colorModel:B,colorPrimaries:G,transferFunction:M,flags:d,texelBlockDimension:h,bytesPlane:K,samples:[]},y=(C/4-6)/4;for(let H=0;H<y;H++){let e={bitOffset:A._nextUint16(),bitLength:A._nextUint8(),channelType:A._nextUint8(),samplePosition:[A._nextUint8(),A._nextUint8(),A._nextUint8(),A._nextUint8()],sampleLower:Number.NEGATIVE_INFINITY,sampleUpper:Number.POSITIVE_INFINITY};64&e.channelType?(e.sampleLower=A._nextInt32(),e.sampleUpper=A._nextInt32()):(e.sampleLower=A._nextUint32(),e.sampleUpper=A._nextUint32()),F.samples[H]=e}r.dataFormatDescriptor.length=0,r.dataFormatDescriptor.push(F);let N=new fe(e,s,u,!0);for(;N._offset<u;){let e=N._nextUint32(),t=N._scan(e),n=Rn(t);if(r.keyValue[n]=N._nextUint8Array(e-t.byteLength-1),n.match(/^ktx/i)){let e=Rn(r.keyValue[n]);r.keyValue[n]=e.substring(0,e.lastIndexOf("\0"))}let _=e%4?4-e%4:0;N._skip(_)}if(c<=0)return r;let E=new fe(e,R,c,!0),v=E._nextUint16(),P=E._nextUint16(),S=E._nextUint32(),V=E._nextUint32(),m=E._nextUint32(),U=E._nextUint32(),g=[];for(let H=0;H<i;H++)g.push({imageFlags:E._nextUint32(),rgbSliceByteOffset:E._nextUint32(),rgbSliceByteLength:E._nextUint32(),alphaSliceByteOffset:E._nextUint32(),alphaSliceByteLength:E._nextUint32()});let L=R+E._offset,w=L+S,I=w+V,D=I+m,b=new Uint8Array(e.buffer,e.byteOffset+L,S),X=new Uint8Array(e.buffer,e.byteOffset+w,V),x=new Uint8Array(e.buffer,e.byteOffset+I,m),$=new Uint8Array(e.buffer,e.byteOffset+D,U);return r.globalData={endpointCount:v,selectorCount:P,imageDescs:g,endpointsData:b,selectorsData:X,tablesData:x,extendedData:$},r}var De,An=sr(cn(),1),Tn=["positiveX","negativeX","positiveY","negativeY","positiveZ","negativeZ"],un=163,fn=166;function Rr(e,t){sn.typeOf.object("transcoderModule",De);let r,n=e.ktx2Buffer,_=e.supportedTargetFormats;try{r=an(n)}catch{throw new re("Invalid KTX2 file.")}if(0!==r.layerCount)throw new re("KTX2 texture arrays are not supported.");if(0!==r.pixelDepth)throw new re("KTX2 3D textures are unsupported.");let i=r.dataFormatDescriptor[0],o=new Array(r.levelCount);return 0!==r.vkFormat||i.colorModel!==un&&i.colorModel!==fn?(t.push(n.buffer),ar(r,o)):cr(n,r,_,De,t,o),o}function ar(e,t){let r,n=e.vkFormat===me.VK_FORMAT_R8G8B8_SRGB?U.RGB:U.RGBA;e.vkFormat===me.VK_FORMAT_R8G8B8A8_UNORM?r=y.UNSIGNED_BYTE:e.vkFormat===me.VK_FORMAT_R16G16B16A16_SFLOAT?r=y.HALF_FLOAT:e.vkFormat===me.VK_FORMAT_R32G32B32A32_SFLOAT&&(r=y.FLOAT);for(let _=0;_<e.levels.length;++_){let i={};t[_]=i;let o=e.levels[_].levelData,a=e.pixelWidth>>_,s=e.pixelHeight>>_,u=a*s*U.componentsLength(n);for(let t=0;t<e.faceCount;++t){let _,R=o.byteOffset+u*e.typeSize*t;_=Le(r)&&1!==y.sizeInBytes(r)?2===y.sizeInBytes(r)?new Uint16Array(o.buffer,R,u):new Float32Array(o.buffer,R,u):new Uint8Array(o.buffer,R,u),i[Tn[t]]={internalFormat:n,datatype:r,width:a,height:s,levelBuffer:_}}}}function cr(e,t,r,n,_,i){let o=new n.KTX2File(e),a=o.getWidth(),s=o.getHeight(),u=o.getLevels(),R=o.getHasAlpha();if(!(a>0)||!(s>0)||!(u>0))throw o.close(),o.delete(),new re("Invalid KTX2 file");let c,f,T=t.dataFormatDescriptor[0],A=n.transcoder_texture_format;if(T.colorModel===un)if(r.etc)c=R?U.RGBA8_ETC2_EAC:U.RGB8_ETC2,f=R?A.cTFETC2_RGBA:A.cTFETC1_RGB;else if(r.etc1&&!R)c=U.RGB_ETC1,f=A.cTFETC1_RGB;else if(r.s3tc)c=R?U.RGBA_DXT5:U.RGB_DXT1,f=R?A.cTFBC3_RGBA:A.cTFBC1_RGB;else if(r.pvrtc)c=R?U.RGBA_PVRTC_4BPPV1:U.RGB_PVRTC_4BPPV1,f=R?A.cTFPVRTC1_4_RGBA:A.cTFPVRTC1_4_RGB;else if(r.astc)c=U.RGBA_ASTC,f=A.cTFASTC_4x4_RGBA;else{if(!r.bc7)throw new re("No transcoding format target available for ETC1S compressed ktx2.");c=U.RGBA_BC7,f=A.cTFBC7_RGBA}else if(T.colorModel===fn)if(r.astc)c=U.RGBA_ASTC,f=A.cTFASTC_4x4_RGBA;else if(r.bc7)c=U.RGBA_BC7,f=A.cTFBC7_RGBA;else if(r.s3tc)c=R?U.RGBA_DXT5:U.RGB_DXT1,f=R?A.cTFBC3_RGBA:A.cTFBC1_RGB;else if(r.etc)c=R?U.RGBA8_ETC2_EAC:U.RGB8_ETC2,f=R?A.cTFETC2_RGBA:A.cTFETC1_RGB;else if(r.etc1&&!R)c=U.RGB_ETC1,f=A.cTFETC1_RGB;else{if(!r.pvrtc)throw new re("No transcoding format target available for UASTC compressed ktx2.");c=R?U.RGBA_PVRTC_4BPPV1:U.RGB_PVRTC_4BPPV1,f=R?A.cTFPVRTC1_4_RGBA:A.cTFPVRTC1_4_RGB}if(!o.startTranscoding())throw o.close(),o.delete(),new re("startTranscoding() failed");for(let l=0;l<t.levels.length;++l){let e={};i[l]=e,a=t.pixelWidth>>l,s=t.pixelHeight>>l;let r=o.getImageTranscodedSizeInBytes(l,0,0,f.value),n=new Uint8Array(r),u=o.transcodeImage(n,l,0,0,f.value,0,-1,-1);if(!Le(u))throw new re("transcodeImage() failed.");_.push(n.buffer),e[Tn[0]]={internalFormat:c,width:a,height:s,levelBuffer:n}}return o.close(),o.delete(),i}async function Ar(e,t){let r=e.webAssemblyConfig,n=An.default??self.BASIS;return De=Le(r.wasmBinaryFile)?await n(r):await n(),De.initializeBasis(),!0}function Tr(e,t){let r=e.webAssemblyConfig;return Le(r)?Ar(e,t):Rr(e,t)}var vr=on(Tr);export{vr as default};