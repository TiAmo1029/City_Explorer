# 城市探索者 (City Explorer) - v_1.0

[在线访问链接 (Live Demo)](https://tiamo1029.github.io/City_Explorer/)

这是一个基于现代 Web 技术栈构建的、交互式的 WebGIS 数据可视化平台。本项目旨在完整地实践并展现 WebGIS 开发的全链路流程，从后端的空间数据处理与服务发布，到前端的组件化开发、高性能地图渲染与丰富的用户交互。

## **✨ 项目核心功能**

**1. 交互式地图渲染:** 使用 Mapbox GL JS 渲染由 MapTiler 提供的专业、美观的地图底图。

**2. 多源 GIS 数据显示:**
通过消费静态 GeoJSON 文件，在地图上高效渲染全国省份面状图层，数据来源于天地图官方网站，其提供 2024 年省市县三级行政区划矢量数据的下载服务，数据格式为 GeoJSON，审图号为 GS（2024）0650 号，坐标系为 GCS_WGS_1984。。
通过消费 GeoServer 发布的 WMS 服务，加载海量的城市点位栅格瓦片图。

**3. 动态图层控制:** 提供浮动 UI 面板，支持对“省份”和“城市”两大类图层的总开关控制，以及对单个省份要素的独立显示/隐藏控制。

**4. 丰富的地图交互:**

（1）悬浮高亮 (Hover): 鼠标滑过省份时，实时高亮，提供即时视觉反馈。

（2）点击查询与高亮 (Select): 点击省份，在右侧属性面板中展示其详细信息，并以更醒目的颜色在地图上锁定高亮。
点击空白处清空选择，交互逻辑完整。

**5. 专业级 UI 面板:** 所有 UI 面板（图层控制、属性详情）均采用抽屉式设计，支持流畅的折叠与展开动画，在不影响地图视野的情况下提供强大的功能。

**6. 多页面应用架构:** 使用 Vue Router 构建单页面应用(SPA)，包含首页、地图页和关于页，导航清晰，切换流畅。

## **🚀 核心技术栈**

1. 前端框架: Vue 3 (Composition API)

2. 状态管理: Pinia

3. 路由管理: Vue Router 4

4. UI 组件库: Element Plus

5. 地图渲染引擎: Mapbox GL JS

6. HTTP 客户端: Axios (用于 WFS/GeoJSON 请求)

7. GIS 后端服务 (开发阶段): GeoServer, PostgreSQL + PostGIS

8. 部署: Git, GitHub Pages

## **🧠 已实现的技术亮点与思考**

**1. 组件化与状态管理:**
深刻实践了 Vue 的组件化思想，将地图、图层控制、属性面板等 UI 模块，解耦为独立、可复用的组件。
利用 Pinia 作为单一数据源 (Single Source of Truth)，对所有图层的可见性、选中状态等全局数据进行集中管理，彻底解决了复杂交互下的状态一致性问题。

**2. 高性能地图交互:**
通过监听 Mapbox 的 mousemove, mouseleave, click 事件，结合 map.setFeatureState() API，实现了高性能的要素状态切换。这种方式避免了重复修改数据源(Source)，即使在海量要素下也能保证高亮交互的流畅。

**3. 前后端数据链路实践:**
在开发阶段，亲手打通了从 PostGIS 到 GeoServer WFS/WMS 服务，再到前端 Vue 应用消费的完整链路。
在最终部署时，出于对公共访问和性能的考虑，果断将 WFS 服务获取的数据，固化为静态 GeoJSON 文件随项目一同部署，这是一个典型的、基于实际场景的工程决策。

## **🚧 未实现及未来优化方向**

一个好的项目永远有成长的空间，这正是我对技术保持热情的原因。

**1. 图表联动功能解耦：** 当前版本暂时隐藏了 ECharts 图表。下一步将引入独立的城市 POI 数据源（可通过静态文件或专用 API），使图表能够独立于省份图层，进行更有意义的统计分析（如“全国主要城市等级分布”）。

**2. 引入矢量瓦片 (Vector Tiles):** 对于更复杂的业务数据（如全国路网、水系），目前 WFS 加载全量 GeoJSON 的方式存在性能瓶颈。未来将研究使用 Tippecanoe 等工具将数据预处理成矢量瓦片，并通过 MapTiler 或自建服务进行托 管，实现海量矢量数据的秒级渲染。

**3. 后端服务化 (API-First):** 将项目中用到的空间分析能力（如缓冲区、叠加分析），用 Python + FastAPI 封装成独立的、可被任何客户端调用的 RESTful API，实现真正的“后端即服务”。

**4. 迈向三维 (Cesium.js):** 本项目已为二三维联动打下基础。未来将引入 Cesium.js，在保留 2D 地图页的同时，新增一个 3D 场景页，将 PostGIS 中的数据（如建筑物高度）渲染为三维模型，构建数字孪生场景。
